{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useForm}from'react-hook-form';import{useLocation,useNavigate}from'react-router-dom';import{axiosWithToken}from'./axiosWithToken';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";function Dashboard(){let[value,setValue]=useState(\"\");let[web,setWeb]=useState([]);let[err,setErr]=useState(\"\");let{register,handleSubmit}=useForm();let navigate=useNavigate();let{state}=useLocation();let[codes,setCodes]=useState([]);let[flag,setFlag]=useState(0);async function getcodes(){console.log(state.labnumber);let res=await axiosWithToken.get(\"http://localhost:5300/labs/\".concat(state.labnumber));console.log(res.data);console.log(res.data.payload);console.log(res.data.payload[0]);console.log(res.data.payload[0].exams);setCodes(res.data.payload[0].exams);}useEffect(()=>{getcodes();console.log(codes);},[value]);async function randomNumberGenerator(){let temp=\"\";let chars=\"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\",len=6,code;for(let i=0;i<len;i++)temp+=chars.charAt(Math.floor(Math.random()*chars.length));setValue(temp);}async function addLogs(){let obj={};obj.code=value;obj.date=new Date();let res=await axiosWithToken.put(\"http://localhost:5300/code/\".concat(state.labnumber),obj);}function AddWebsites(Obj){let str=Obj.content;const list=str.split(\"\\n\");setWeb(list);addInstance();addLogs();window.location.reload();setFlag(1);}async function addInstance(){let activeObj={};activeObj.code=value;console.log(activeObj);activeObj.date=new Date();activeObj.labnumber=state.labnumber;activeObj.allowedWebsites=web;activeObj.users=[];let res=await axiosWithToken.post(\"http://localhost:5300/instance\",activeObj);if(res.data.message!=='New instance created')setErr(res.data.message);}useEffect(()=>{randomNumberGenerator();},[]);function getTime(date){let time=new Date(date).getUTCHours();if(time>12)return\"Afternoon\";else return\"Morning\";}function goToRoom(code){navigate(\"/room/\".concat(code),{state:code});}function ISOtoUTC(iso){let date=new Date(iso).getUTCDate();let day=new Date(iso).getUTCDay();let year=new Date(iso).getUTCFullYear();return\"\".concat(date,\"/\").concat(day,\"/\").concat(year);}return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-4\",children:[err,/*#__PURE__*/_jsxs(\"h1\",{children:[\"Welcome to the dashboard of \",state.labnumber]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-around\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mt-5\",children:\"The generated code for this session \"}),/*#__PURE__*/_jsx(\"h1\",{className:\"p-3 mt-4 text-center\",style:{color:'#EEEEEE',backgroundColor:'#32012F'},children:value})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Give Allowlist of websites\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(AddWebsites),children:[/*#__PURE__*/_jsx(\"textarea\",{rows:5,className:\"form-control mb-2\",placeholder:\"Ex :- https://www.kaggle.com/* https://www.programiz.com/*\",...register('content')}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-warning\",children:\"Start Session\"})]})]})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"w-75 mx-auto table-success mt-3 table-striped table-hover table text-center\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Date of exam\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Code\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Time of exam\"}),/*#__PURE__*/_jsx(\"th\",{children:\"More Info\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:codes.length>0&&codes.map((ele,ind)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:ISOtoUTC(ele.date)}),/*#__PURE__*/_jsx(\"td\",{children:ele.code}),/*#__PURE__*/_jsx(\"td\",{children:getTime(ele.date)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:()=>goToRoom(ele.code),children:\"Read More...\"})})]},ind))})]})]});}export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","useForm","useLocation","useNavigate","axiosWithToken","jsxs","_jsxs","jsx","_jsx","Dashboard","value","setValue","web","setWeb","err","setErr","register","handleSubmit","navigate","state","codes","setCodes","flag","setFlag","getcodes","console","log","labnumber","res","get","concat","data","payload","exams","randomNumberGenerator","temp","chars","len","code","i","charAt","Math","floor","random","length","addLogs","obj","date","Date","put","AddWebsites","Obj","str","content","list","split","addInstance","window","location","reload","activeObj","allowedWebsites","users","post","message","getTime","time","getUTCHours","goToRoom","ISOtoUTC","iso","getUTCDate","day","getUTCDay","year","getUTCFullYear","className","children","style","color","backgroundColor","onSubmit","rows","placeholder","map","ele","ind","onClick"],"sources":["C:/Users/aniru/OneDrive/Desktop/Invigil/invigil/teachers_dashboard/client/src/Dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useForm } from 'react-hook-form'\r\nimport { useLocation, useNavigate } from 'react-router-dom'\r\nimport { axiosWithToken } from './axiosWithToken'\r\n\r\nfunction Dashboard() {\r\n\r\n  let [value, setValue] = useState(\"\")\r\n  let [web, setWeb] = useState([])\r\n  let [err, setErr] = useState(\"\")\r\n  let { register, handleSubmit } = useForm()\r\n  let navigate = useNavigate()\r\n  let { state } = useLocation()\r\n  let [codes, setCodes] = useState([])\r\n  let [flag, setFlag] = useState(0)\r\n\r\n  async function getcodes() {\r\n    console.log(state.labnumber)\r\n    let res = await axiosWithToken.get(`http://localhost:5300/labs/${state.labnumber}`)\r\n    console.log(res.data)\r\n    console.log(res.data.payload)\r\n    console.log(res.data.payload[0])\r\n    console.log(res.data.payload[0].exams)\r\n    setCodes(res.data.payload[0].exams)\r\n  }\r\n  useEffect(() => {\r\n    getcodes()\r\n    console.log(codes)\r\n  }, [value])\r\n\r\n  async function randomNumberGenerator() {\r\n    let temp = \"\"\r\n    let chars = \"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\", len = 6, code\r\n    for (let i = 0; i < len; i++)\r\n      temp += chars.charAt(Math.floor(Math.random() * chars.length))\r\n    setValue(temp)\r\n  }\r\n\r\n  async function addLogs() {\r\n    let obj = {}\r\n    obj.code = value\r\n    obj.date = new Date()\r\n    let res = await axiosWithToken.put(`http://localhost:5300/code/${state.labnumber}`, obj)\r\n  }\r\n\r\n  function AddWebsites(Obj) {\r\n    let str = Obj.content\r\n    const list = str.split(\"\\n\");\r\n    setWeb(list)\r\n    addInstance()\r\n    addLogs()\r\n    window.location.reload()\r\n    setFlag(1)\r\n  }\r\n\r\n  async function addInstance() {\r\n    let activeObj = {}\r\n    activeObj.code = value\r\n    console.log(activeObj)\r\n    activeObj.date = new Date()\r\n    activeObj.labnumber = state.labnumber\r\n    activeObj.allowedWebsites = web\r\n    activeObj.users = []\r\n    let res = await axiosWithToken.post(\"http://localhost:5300/instance\", activeObj)\r\n    if (res.data.message !== 'New instance created')\r\n      setErr(res.data.message)\r\n  }\r\n\r\n  useEffect(() => {\r\n    randomNumberGenerator()\r\n  }, [])\r\n\r\n  function getTime(date) {\r\n    let time = new Date(date).getUTCHours()\r\n    if (time > 12)\r\n      return \"Afternoon\"\r\n    else\r\n      return \"Morning\"\r\n  }\r\n\r\n  function goToRoom(code) {\r\n    navigate(`/room/${code}`, { state: code })\r\n  }\r\n\r\n  function ISOtoUTC(iso) {\r\n    let date = new Date(iso).getUTCDate();\r\n    let day = new Date(iso).getUTCDay();\r\n    let year = new Date(iso).getUTCFullYear();\r\n    return `${date}/${day}/${year}`;\r\n  }\r\n\r\n  return (\r\n    <div className='container mt-4'>\r\n      {err}\r\n      <h1>Welcome to the dashboard of {state.labnumber}</h1>\r\n      <div className='d-flex justify-content-around'>\r\n        <div className='d-flex flex-column'>\r\n          <h4 className='mt-5'>The generated code for this session </h4>\r\n          <h1 className='p-3 mt-4 text-center' style={{ color: '#EEEEEE', backgroundColor: '#32012F' }}>{value}</h1>\r\n        </div>\r\n        <div className='d-flex flex-column'>\r\n          <h3>Give Allowlist of websites</h3>\r\n          <form onSubmit={handleSubmit(AddWebsites)}>\r\n            <textarea rows={5} className='form-control mb-2' placeholder='Ex :- https://www.kaggle.com/* https://www.programiz.com/*' {...register('content')} />\r\n            <button className='btn btn-warning'>Start Session</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n      {/* {flag && <h1>Go to the current room <button className='btn btn-info' onClick={() => goToRoom(value)}>Room</button></h1>} */}\r\n      <table className=\"w-75 mx-auto table-success mt-3 table-striped table-hover table text-center\">\r\n        <thead>\r\n          <tr>\r\n            <th>Date of exam</th>\r\n            <th>Code</th>\r\n            <th>Time of exam</th>\r\n            <th>More Info</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {codes.length > 0 && codes.map((ele, ind) => (\r\n            <tr key={ind}>\r\n              <td>{ISOtoUTC(ele.date)}</td>\r\n              <td>{ele.code}</td>\r\n              <td>{getTime(ele.date)}</td>\r\n              <td><button className='btn btn-danger' onClick={() => goToRoom(ele.code)}>Read More...</button></td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Dashboard"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}