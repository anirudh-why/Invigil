{"ast":null,"code":"import React,{useState,useEffect}from'react';import{axiosWithToken}from'./axiosWithToken';import{useLocation}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Room(){const[users,setUsers]=useState([]);const{state}=useLocation();async function getUsers(){console.log(state);try{let res=await axiosWithToken.get(\"http://localhost:5300/users/\".concat(state));console.log(res.data);console.log(res.data.payload[0].users);setUsers(res.data.payload[0].users);}catch(error){console.error(\"Error fetching users:\",error);}}useEffect(()=>{const interval=setInterval(()=>{getUsers();},500);return()=>clearInterval(interval);},[]);function getMalCount(log){let cnt=[0,0,0];if(log){log.forEach(ele=>{if(ele.includes(\"Ctrl\"))cnt[0]++;else if(ele.includes(\"Tab\"))cnt[1]++;else if(ele.includes(\"Full\"))cnt[2]++;});}return cnt;}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-center mt-3\",children:[\"This room number is \",/*#__PURE__*/_jsx(\"h1\",{style:{color:\"#32012F\"},children:state})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"w-75 mx-auto table-info mt-3 table-striped table-hover table text-center\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"IP Addr\"}),/*#__PURE__*/_jsx(\"th\",{children:\"RollNo.\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Ctrl Keys\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Tab switching\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Full screen\"}),/*#__PURE__*/_jsx(\"th\",{children:\"GeoLocation\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.length>0&&users.map((ele,ind)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:ele.IPAdd}),/*#__PURE__*/_jsx(\"td\",{children:ele.rollno}),/*#__PURE__*/_jsx(\"td\",{children:getMalCount(ele.logs)[0]}),/*#__PURE__*/_jsx(\"td\",{children:getMalCount(ele.logs)[1]}),/*#__PURE__*/_jsx(\"td\",{children:getMalCount(ele.logs)[2]}),/*#__PURE__*/_jsx(\"td\",{children:ele.loc})]},ind))})]})]});}export default Room;","map":{"version":3,"names":["React","useState","useEffect","axiosWithToken","useLocation","jsx","_jsx","jsxs","_jsxs","Room","users","setUsers","state","getUsers","console","log","res","get","concat","data","payload","error","interval","setInterval","clearInterval","getMalCount","cnt","forEach","ele","includes","children","className","style","color","length","map","ind","IPAdd","rollno","logs","loc"],"sources":["C:/Users/aniru/OneDrive/Desktop/Invigil/invigil/teachers_dashboard/client/src/Room.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { axiosWithToken } from './axiosWithToken'\r\nimport { useLocation } from 'react-router-dom'\r\n\r\nfunction Room() {\r\n  const [users, setUsers] = useState([])\r\n  const { state } = useLocation()\r\n\r\n  async function getUsers() {\r\n    console.log(state)\r\n    try {\r\n      let res = await axiosWithToken.get(`http://localhost:5300/users/${state}`)\r\n      console.log(res.data)\r\n      console.log(res.data.payload[0].users)\r\n      setUsers(res.data.payload[0].users)\r\n    } catch (error) {\r\n      console.error(\"Error fetching users:\", error)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      getUsers()\r\n    }, 500)\r\n    return () => clearInterval(interval)\r\n  }, [])\r\n\r\n  function getMalCount(log) {\r\n    let cnt = [0, 0, 0]\r\n    if (log) {\r\n      log.forEach(ele => {\r\n        if (ele.includes(\"Ctrl\"))\r\n          cnt[0]++\r\n        else if (ele.includes(\"Tab\"))\r\n          cnt[1]++\r\n        else if (ele.includes(\"Full\"))\r\n          cnt[2]++\r\n      })\r\n    }\r\n    return cnt\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1 className='text-center mt-3'>This room number is <h1 style={{ color: \"#32012F\" }}>{state}</h1></h1>\r\n      <table className=\"w-75 mx-auto table-info mt-3 table-striped table-hover table text-center\">\r\n        <thead>\r\n          <tr>\r\n            <th>IP Addr</th>\r\n            <th>RollNo.</th>\r\n            <th>Ctrl Keys</th>\r\n            <th>Tab switching</th>\r\n            <th>Full screen</th>\r\n            <th>GeoLocation</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {users.length > 0 && users.map((ele, ind) => (\r\n            <tr key={ind}>\r\n              <td>{ele.IPAdd}</td>\r\n              <td>{ele.rollno}</td>\r\n              <td>{getMalCount(ele.logs)[0]}</td>\r\n              <td>{getMalCount(ele.logs)[1]}</td>\r\n              <td>{getMalCount(ele.logs)[2]}</td>\r\n              <td>{ele.loc}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Room\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}